(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{88:function(e,t,r){},89:function(e,t,r){"use strict";r.r(t);var s=r(22),i=r(23),a=r(6),c=r(16),l=r(0),n=r.n(l),o=r(92),d=r(7),j=r(93),u=r(94);const b=(e,t)=>{if(!e)return null;Object(o.a)({locale:u.a});const r=Object(d.a)(e);return Object(j.a)(new Date(r),t)};var h=r(2);const p=e=>{let{id:t,type:r,day:s}=e;return Object(h.jsxs)("div",{className:"head",children:[Object(h.jsx)("div",{className:`icon ${r}`}),Object(h.jsxs)("div",{className:"current-date",children:[Object(h.jsx)("p",{children:b(s,"EEEE")}),Object(h.jsx)("span",{children:` ${b(s,"e")} ${b(s,"MMMM")} `})]})]},t)},m=e=>{let{temperature:t,rain_probability:r,humidity:s,id:i}=e;return Object(h.jsxs)("div",{className:"current-weather",children:[Object(h.jsx)("p",{className:"temperature",children:t}),Object(h.jsxs)("p",{className:"meta",children:[Object(h.jsxs)("span",{className:"rainy",children:["% ",r]}),Object(h.jsxs)("span",{className:"humidity",children:["%",s]})]})]},i)};var O=r(53),x=r.n(O);const y=Object.freeze({async getWeather(){const{data:e}=await x.a.get("https://lab.lectrum.io/rtx/api/forecast");return e.data}}),v=(e,t)=>{let r=[...t];return(null===e||void 0===e?void 0:e.typeRadio)&&(r=[...r.filter((t=>t.type===e.typeRadio))]),(null===e||void 0===e?void 0:e.minTemp)&&(r=[...r.filter((t=>t.temperature>=e.minTemp))]),(null===e||void 0===e?void 0:e.maxTemp)&&(r=[...r.filter((t=>t.temperature<=e.maxTemp))]),r};class f{constructor(){this.isFiltered=!1,this.dayId="",this.activeBox="",this.filtrationProp=null,Object(a.d)(this,{rootStore:!1},{autoBind:!0})}get filtrationProperties(){return this.filtrationProp}setFiltrationProperties(e){this.filtrationProp=e}resetFilter(){this.filtrationProp=null}setType(e){this.type=e}get activeCheckbox(){return this.activeBox}setActiveCheckbox(e){this.activeBox=e}setMinTemperature(e){this.minTemperature=e}setMaxTemperature(e){this.maxTemperature=e}get isFormBlocked(){return""===this.type&&""===this.minTemperature&&""===this.maxTemperature}get selectedDayId(){return this.dayId}setSelectedDayId(e){this.dayId=e}get selectedType(){return this.type}}new f;const g=new class{constructor(){this.weatherStore=null,Object(a.d)(this),this.weatherStore=new f(this)}},w=Object(l.createContext)(g),T=e=>Object(h.jsx)(w.Provider,{value:g,children:e.children}),S=()=>Object(l.useContext)(w),P=()=>{const e=Object(i.useQuery)("weather",y.getWeather),{data:t,isFetched:r,isSuccess:s}=e,{weatherStore:a}=S();return Object(l.useEffect)((()=>{var e;Array.isArray(t)&&(null===t||void 0===t?void 0:t.length)&&a.setSelectedDayId(null===(e=t[0])||void 0===e?void 0:e.id)}),[t]),{data:Array.isArray(t)?(()=>{if(s&&Array.isArray(t))return a.filtrationProperties?[...v(a.filtrationProperties,t)].slice(0,7):t.slice(0,7)})():[],isFetched:r}},N=(e,t)=>e?t||null:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",k=Object(c.a)((()=>{const{data:e,isFetched:t}=P(),{weatherStore:r}=S(),[s,i]=Object(l.useState)(null),c=s?s.id:r.selectedDayId,o=e.filter((e=>e.id===c)).map((e=>Object(h.jsxs)(n.a.Fragment,{children:[Object(h.jsx)(p,{...e}),Object(h.jsx)(m,{...e})]},e.id)));return Object(l.useEffect)((()=>{Object(a.g)((()=>{r.filtrationProperties&&i(e[0])}))}),[r.filtrationProperties]),Object(h.jsx)(h.Fragment,{children:N(t,o)})}));var F=r(27),C=r.n(F);const E=Object(c.a)((()=>{const{data:e,isFetched:t}=P(),{weatherStore:r}=S(),s=e.map((e=>{let{id:t,type:s,day:i,temperature:a}=e;const c=C()(`day ${s}`,{selected:t===r.selectedDay});return Object(h.jsxs)("div",{className:c,onClick:()=>r.setSelectedDayId(t),children:[Object(h.jsx)("p",{children:b(i,"EEEE")}),Object(h.jsx)("span",{children:a})]},t)}));return Object(h.jsx)("div",{className:"forecast",children:s.length?N(t,s):Object(h.jsx)("p",{className:"message",children:"\u041f\u043e \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c \u043d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u0434\u043d\u0435\u0439!"})})}));var A=r(55),I=r(54),R=r.n(I);const D=Object(c.a)((e=>{let{type:t,value:r,register:s,label:i}=e;return Object(h.jsxs)("p",{className:"custom-input",children:[Object(h.jsx)("label",{children:i}),Object(h.jsx)("input",{type:t,value:r,...s})]})})),B=e=>{let{type:t,value:r,register:s,selected:i,setActiveCheckbox:a,label:c}=e;const{weatherStore:l}=S(),n=C()("checkbox",{selected:i});return Object(h.jsxs)("label",{className:n,onClick:l.filtrationProperties?null:()=>{a(r)},children:[c,Object(h.jsx)("input",{type:t,value:r,...s})]})},M=Object(c.a)((()=>{const[e,t]=Object(l.useState)(""),{weatherStore:r}=S(),{register:s,handleSubmit:i,watch:a,formState:c,reset:n}=Object(A.a)({defaultValues:{minTemp:null,maxTemp:null}}),o="cloudy",d="sunny";return Object(h.jsxs)("form",{className:"filter",onSubmit:i((e=>{e.minTemp&&e.maxTemp&&r.setFiltrationProperties(e)})),children:[Object(h.jsx)(B,{type:"radio",label:"\u041e\u0431\u043b\u0430\u0447\u043d\u043e",setActiveCheckbox:t,selected:e===o,value:o,register:s("typeRadio")}),Object(h.jsx)(B,{type:"radio",label:"\u0421\u043e\u043b\u043d\u0435\u0447\u043d\u043e",setActiveCheckbox:t,selected:e===d,value:d,register:s("typeRadio")}),Object(h.jsx)(D,{type:"number",register:s("minTemp"),label:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),Object(h.jsx)(D,{type:"number",register:s("maxTemp"),label:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"}),r.filtrationProperties?Object(h.jsx)("button",{onClick:()=>{r.resetFilter(),t(""),n()},children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"}):Object(h.jsx)("button",{disabled:R.a.isEqual(a(),c.defaultValues),type:"submit",children:"\u041e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c"})]})})),q=Object(c.a)((()=>Object(h.jsxs)("main",{children:[Object(h.jsx)(M,{}),Object(h.jsx)(k,{}),Object(h.jsx)(E,{})]})));r(88);const $=new i.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});Object(a.b)({enforceActions:"always",computedRequiresReaction:!0,observableRequiresReaction:!0,reactionRequiresObservable:!0}),Object(s.render)(Object(h.jsx)(i.QueryClientProvider,{client:$,children:Object(h.jsx)(T,{children:Object(h.jsx)(q,{})})}),document.getElementById("root"),(()=>{console.log("%c \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043e ","background: #00ff00; color: #000000; padding: 2.5px;")}))}},[[89,1,2]]]);
//# sourceMappingURL=main.1123bba3.chunk.js.map